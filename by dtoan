-- ===== Services =====
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

-- ===== Load Dtoan GUI =====
local Dtoan = loadstring(game:HttpGet('https://raw.githubusercontent.com/duytoan429/Menu/refs/heads/main/sourcebydtoan.lua.txt'))()
local Window = Dtoan:CreateWindow({
    Name = "Dtoan",
    Icon = 0,
    LoadingTitle = "Dtoan",
    Theme = "Default",
    ToggleUIKeybind = "K",
    ConfigurationSaving = {Enabled = true, FileName = "Dtoan Hub"},
    KeySystem = false
})

-- ===== Tabs Blox Fruit =====
local BloxFruitTab = Window:CreateTab("Blox Fruit", 4483362458)
BloxFruitTab:CreateButton({Name = "Speed Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"))() end})
BloxFruitTab:CreateButton({Name = "Teddy Hub", Callback = function() repeat task.wait() until game:IsLoaded() and game.Players.LocalPlayer:FindFirstChild("PlayerGui") loadstring(game:HttpGet("https://raw.githubusercontent.com/Teddyseetink/Haidepzai/refs/heads/main/TEDDYHUB-FREEMIUM"))() end})
BloxFruitTab:CreateButton({Name = "Kiwi Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/HieuDepTrai-Z/KiwiHubFree/refs/heads/main/KiwiHub.lua"))() end})
BloxFruitTab:CreateButton({Name = "Doraemon Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/KiddoHiru/BloxFruits/main/MasterHub.lua"))() end})
BloxFruitTab:CreateButton({Name = "Zee Hub", Callback = function() loadstring(game:HttpGet("https://zuwz.me/Ls-Zee-Hub"))() end})
BloxFruitTab:CreateButton({Name = "Đạt Thg", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/LuaCrack/DatThg/refs/heads/main/DatThgV2"))() end})
BloxFruitTab:CreateButton({Name = "W Azure", Callback = function() loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/85e904ae1ff30824c1aa007fc7324f8f.lua"))() end})
BloxFruitTab:CreateButton({Name = "Quantum Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/flazhy/QuantumOnyx/refs/heads/main/QuantumOnyx.lua"))() end})
BloxFruitTab:CreateButton({Name = "Astral Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/Overgustx2/Main/refs/heads/main/BloxFruits_25.html"))() end})
BloxFruitTab:CreateButton({Name = "Tsuo hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/Tsuo7/TsuoHub/main/Tsuoscripts"))() end})

-- ===== Grow A Garden Tab =====
local GrowGardenTab = Window:CreateTab("Grow A Garden", 4483362458)
GrowGardenTab:CreateButton({Name = "Speed Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"))() end})

-- ===== 99 Night In The Forest Tab =====
local ForestTab = Window:CreateTab("99 Night In The Forest", 4483362458)
ForestTab:CreateButton({Name = "Forest Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/duytoan429/ForestHub/main/99Night.lua"))() end})

-- ===== Crossover Tab =====
local CrossoverTab = Window:CreateTab("Crossover", 4483362458)
CrossoverTab:CreateButton({Name = "Goomba Hub (Arise Crossover)", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/JustLevel/goombahub/main/AriseCrossover.lua"))() end})

-- ===== Steal a Brainrot Tab =====
local BrainrotTab = Window:CreateTab("Steal a Brainrot", 4483362458)
local function AddButton(tab, data) tab:CreateButton({Name=data.Name, Callback=data.Callback}) end
AddButton(BrainrotTab, {Name="Kurd hub", Callback=function() loadstring(game:HttpGet("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Kurdhub"))() end})
AddButton(BrainrotTab, {Name="Lemon hub", Callback=function() loadstring(game:HttpGet("https://pastefy.app/MJw2J4T6/raw"))() end})
AddButton(BrainrotTab, {Name="Chilli hub", Callback=function() loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"))() end})

-- ===== Banana Premium Tab với key riêng =====
local BananaTab = Window:CreateTab("Banana Premium", 4483362458)
local BananaKey = "DtoanVIP123" -- key riêng
local SavedKeyFile = "DtoanHub_BananaKey.txt"
local HasAccess = false

-- Kiểm tra nếu đã lưu key
if isfile and isfile(SavedKeyFile) then
    local saved = readfile(SavedKeyFile)
    if saved == BananaKey then
        HasAccess = true
    end
end

local function OpenBananaPremium()
    BananaTab:CreateButton({Name = "Banana Pvp", Callback = function()
        repeat wait() until game:IsLoaded() and game.Players.LocalPlayer
        getgenv().Key = "ec1d1b42f3d34269beecb935"
        loadstring(game:HttpGet("https://raw.githubusercontent.com/obiiyeuem/vthangsitink/refs/heads/main/BloxFruitPVP.lua"))()
    end})

    BananaTab:CreateButton({Name = "Kaitun blox fruit", Callback = function()
        repeat wait() until game:IsLoaded() and game.Players.LocalPlayer
        getgenv().Key = "ec1d1b42f3d34269beecb935"
        getgenv().SettingFarm = {["Hide UI"] = false}
        loadstring(game:HttpGet("https://raw.githubusercontent.com/obiiyeuem/vthangsitink/main/BananaCat-kaitunBF.lua"))()
    end})
end

-- Nếu chưa có quyền, hiện bảng nhập key
if not HasAccess then
    local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
    ScreenGui.Name = "BananaKeyGui"

    local Frame = Instance.new("Frame", ScreenGui)
    Frame.AnchorPoint = Vector2.new(0.5, 0.5)
    Frame.Position = UDim2.new(0.5, 0, 0.5, 0)
    Frame.Size = UDim2.new(0, 300, 0, 180)
    Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Frame.BackgroundTransparency = 0
    Frame.BorderSizePixel = 2
    Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Frame.Active = true
    Frame.Draggable = true
    Frame.Visible = true

    local Title = Instance.new("TextLabel", Frame)
    Title.Text = "Nhập Key Banana Premium"
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.TextColor3 = Color3.fromRGB(0, 0, 0)
    Title.TextSize = 18
    Title.BackgroundTransparency = 1
    Title.Font = Enum.Font.GothamBold

    local TextBox = Instance.new("TextBox", Frame)
    TextBox.PlaceholderText = "Nhập key tại đây..."
    TextBox.Size = UDim2.new(0.9, 0, 0, 35)
    TextBox.Position = UDim2.new(0.05, 0, 0.4, 0)
    TextBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    TextBox.BackgroundColor3 = Color3.fromRGB(245, 245, 245)
    TextBox.BorderSizePixel = 1
    TextBox.TextSize = 16
    TextBox.Font = Enum.Font.SourceSans

    local Confirm = Instance.new("TextButton", Frame)
    Confirm.Text = "Xác nhận"
    Confirm.Size = UDim2.new(0.9, 0, 0, 35)
    Confirm.Position = UDim2.new(0.05, 0, 0.7, 0)
    Confirm.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    Confirm.TextColor3 = Color3.fromRGB(255, 255, 255)
    Confirm.TextSize = 16
    Confirm.Font = Enum.Font.GothamBold

    Confirm.MouseButton1Click:Connect(function()
        if TextBox.Text == BananaKey then
            if writefile then
                writefile(SavedKeyFile, BananaKey)
            end
            ScreenGui:Destroy()
            HasAccess = true
            OpenBananaPremium()
            Dtoan:Notify("✅ Key hợp lệ! Đã mở khóa Banana Premium.")
        else
            Dtoan:Notify("❌ Key sai! Vui lòng thử lại.")
        end
    end)
else
    OpenBananaPremium()
end

-- ===== Change the Script Tab =====
local ChangeTab = Window:CreateTab("Change the Script", 4483362458)
ChangeTab:CreateToggle({
    Name = "Aim bot",
    CurrentValue = false,
    Flag = "Toggle1",
    Callback = function(Value)
        if Value then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/duytoan429/vip/refs/heads/main/README.md"))()
        end
    end,
})
